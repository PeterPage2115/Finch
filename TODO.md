# TODO **Ostatnie zmiany (6 pa≈∫dziernika 2025 - Sesja 5):**
- ‚úÖ **FAZA 6.1 + 6.2 UKO≈ÉCZONA!** üéâ
- ‚úÖ Faza 6.1: Backend Budgets CRUD (100%)
  - BudgetsModule, Service, Controller
  - calculateProgress() z alertami (80%, 100%)
  - Auto-obliczanie endDate dla okres√≥w
  - Business rule: unique userId+categoryId+startDate
  - ‚è≥ Testy pending (Faza 7)
- ‚úÖ Faza 6.2: Frontend Budgets UI (100%)
  - Strona /budgets z BudgetForm + BudgetList
  - Progress bars (green/yellow/red)
  - Delete confirmation modal
  - API Routes proxy
  - Link "Bud≈ºety" w navbar
  - **Dashboard widget ‚úÖ** (top 3 bud≈ºety, compact design)
- üêõ Bug fixes: Dark mode, emoji removal, unified navbar
- üí° **Decyzja architektoniczna**: Budgets = kontrola wydatk√≥w (reactive), Savings Goals = cele oszczƒôdno≈õciowe (proactive) ‚Üí osobne modu≈Çy!
- üìà **Postƒôp**: Dashboard widget done, pozostajƒÖ Raporty (Faza 6.3) + Testy (Faza 7)

**Nastƒôpny krok:** Faza 6.3 - Podstawowe Raporty üìä lub Faza 7 - Testyzenia Finans√≥w

**Data rozpoczƒôcia:** 1 pa≈∫dziernika 2025  
**Status:** Faza 6 w trakcie üöÄ - Budgets Backend+Frontend ‚úÖ (Raporty + Dashboard widget pending)

---

**Ostatnie zmiany (6 pa≈∫dziernika 2025 - Sesja 5):**
- ‚úÖ **FAZA 6.1 + 6.2 UKO≈ÉCZONA!** üéâ
- ‚úÖ Faza 6.1: Backend Budgets CRUD (100%)
  - BudgetsModule, Service, Controller
  - calculateProgress() z alertami (80%, 100%)
  - Auto-obliczanie endDate dla okres√≥w
  - Business rule: unique userId+categoryId+startDate
  - ‚è≥ Testy pending (Faza 7)
- ‚úÖ Faza 6.2: Frontend Budgets UI (100%)
  - Strona /budgets z BudgetForm + BudgetList
  - Progress bars (green/yellow/red)
  - Delete confirmation modal
  - API Routes proxy
  - Link "Bud≈ºety" w navbar
  - ‚è≥ Dashboard widget pending (Faza 6.3)
- üêõ Bug fixes: Dark mode, emoji removal, unified navbar
- ÔøΩ **Decyzja architektoniczna**: Budgets = kontrola wydatk√≥w (reactive), Savings Goals = cele oszczƒôdno≈õciowe (proactive) ‚Üí osobne modu≈Çy!

**Nastƒôpny krok:** Faza 6.3 - Podstawowe Raporty üìä lub Dashboard widget

---

---

## üèóÔ∏è Faza 1: Inicjalizacja Projektu i Konfiguracja

### 1.1 Struktura Projektu i Dokumentacja
- [x] Utworzenie struktury folder√≥w (`frontend/`, `backend/`, `docs/`)
- [x] Przygotowanie g≈Ç√≥wnego pliku `README.md` z instrukcjƒÖ uruchomienia
- [x] Konfiguracja `.gitignore` (node_modules, .env, build files, etc.)
- [x] Inicjalizacja repozytorium Git i pierwszy commit

### 1.2 Backend - NestJS
- [x] Inicjalizacja projektu NestJS (`nest new backend`)
- [x] Konfiguracja TypeScript (`tsconfig.json`)
- [x] Instalacja zale≈ºno≈õci: Prisma, Passport.js, JWT, class-validator, class-transformer
- [x] Utworzenie `Dockerfile` dla backendu
- [x] Konfiguracja zmiennych ≈õrodowiskowych (`.env.example`)
- [x] Setup Prisma i po≈ÇƒÖczenie z PostgreSQL
- [x] Utworzenie podstawowej struktury folder√≥w (`src/users`, `src/transactions`, `src/budgets`)

### 1.3 Frontend - Next.js
- [x] Inicjalizacja projektu Next.js 14+ z TypeScript
- [x] Konfiguracja Tailwind CSS
- [x] Instalacja zale≈ºno≈õci: Zustand, React Hook Form, Chart.js/Recharts
- [x] Utworzenie `Dockerfile` dla frontendu
- [x] Konfiguracja zmiennych ≈õrodowiskowych (`.env.example`)
- [x] Utworzenie podstawowej struktury folder√≥w (`app/`, `components/`, `lib/`, `types/`)

### 1.4 Docker i Orkiestracja
- [x] Utworzenie `docker-compose.yml` (frontend, backend, PostgreSQL)
- [x] Konfiguracja wolumenu dla PostgreSQL (`pgdata`)
- [x] Konfiguracja sieci Docker dla komunikacji miƒôdzy serwisami
- [x] Test uruchomienia ca≈Çego stacku: `docker-compose up`
- [x] Dokumentacja procesu uruchamiania w `README.md`
- [x] **Naprawa:** Health check frontendu zmieniony z wget na sprawdzanie procesu next-server

---

## üóÑÔ∏è Faza 2: Baza Danych i Modele

### 2.1 Schemat Bazy Danych (Prisma)
- [x] Definicja modelu `User` (id, email, has≈Ço-hash, createdAt, updatedAt)
- [x] Definicja modelu `Transaction` (id, userId, amount, category, description, date, type: income/expense)
- [x] Definicja modelu `Category` (id, name, type, userId)
- [x] Definicja modelu `Budget` (id, userId, categoryId, amount, period, startDate, endDate)
- [x] Definicja relacji miƒôdzy modelami
- [x] Pierwsza migracja: `npx prisma migrate dev --name init`
- [x] Seed danych testowych (opcjonalnie)

---

## üîê Faza 3: Uwierzytelnianie i Autoryzacja

### 3.1 Backend - System Auth
- [x] Modu≈Ç `AuthModule` w NestJS
- [x] Endpoint rejestracji (`POST /auth/register`) z walidacjƒÖ DTO
- [x] Haszowanie hase≈Ç (bcrypt)
- [x] Endpoint logowania (`POST /auth/login`) zwracajƒÖcy JWT
- [x] Guard JWT dla chronionych endpoint√≥w
- [x] Decorator `@CurrentUser()` do wyciƒÖgania u≈ºytkownika z tokenu
- [x] Testy jednostkowe dla AuthService (11 test√≥w)
- [x] Testy integracyjne dla endpoint√≥w auth (22 testy e2e)

### 3.2 Frontend - UI Auth
- [x] Strona rejestracji (`/register`) z formularzem (React Hook Form)
- [x] Strona logowania (`/login`) z formularzem
- [x] ZarzƒÖdzanie stanem autentykacji (Zustand store)
- [x] Zapisywanie JWT w localStorage (via Zustand persist)
- [x] Middleware Next.js do ochrony tras wymagajƒÖcych logowania
- [x] Komponent Dashboard (placeholder)
- [x] Strona g≈Ç√≥wna z przekierowaniem dla zalogowanych

---

## üí∞ Faza 4: Modu≈Ç Transakcji (MVP) ‚úÖ UKO≈ÉCZONA

### 4.1 Backend - API Transakcji ‚úÖ
- [x] Modu≈Ç `TransactionsModule` w NestJS
- [x] DTO dla transakcji (CreateTransactionDto, UpdateTransactionDto)
- [x] Endpoint: `POST /transactions` (tworzenie transakcji)
- [x] Endpoint: `GET /transactions` (lista transakcji u≈ºytkownika z filtrowaniem)
- [x] Endpoint: `GET /transactions/:id` (szczeg√≥≈Çy transakcji)
- [x] Endpoint: `PATCH /transactions/:id` (edycja transakcji)
- [x] Endpoint: `DELETE /transactions/:id` (usuniƒôcie transakcji)
- [x] Walidacja danych wej≈õciowych (class-validator)
- [x] **Bonus:** Paginacja (page, limit, meta)
- [x] **Bonus:** Filtrowanie (type, categoryId, dateRange)
- [x] Testy jednostkowe dla TransactionsService
- [x] Testy integracyjne dla wszystkich endpoint√≥w

### 4.2 Frontend - UI Transakcji ‚úÖ
- [x] Strona g≈Ç√≥wna z listƒÖ transakcji (`/dashboard`)
- [x] Formularz dodawania transakcji (modal)
- [x] Wy≈õwietlanie listy transakcji (tabela)
- [x] Filtrowanie transakcji (po dacie, kategorii, typie)
- [x] Edycja transakcji
- [x] Usuwanie transakcji (z potwierdzeniem)
- [x] Obs≈Çuga b≈Çƒôd√≥w i komunikat√≥w (toast notifications)
- [x] Loading states podczas zapyta≈Ñ API
- [x] **Bonus:** Zustand store z localStorage persist
- [x] **Bonus:** Next.js API Routes jako proxy
- [x] **Bonus:** Categories API (GET /categories)
- [x] **Bonus:** ThemeProvider + Pure Black Dark Mode
- [x] **Bonus:** Professional Icons (lucide-react)
- [x] **Bonus:** Stats calculation z defensywnym programowaniem
- [x] **CRITICAL FIX:** amount.toFixed error (Prisma Decimal ‚Üí string)
- [x] **CRITICAL FIX:** Auto-create default categories przy rejestracji

**Wnioski z Fazy 4:**
- ‚ö†Ô∏è Prisma Decimal zwraca string w runtime - zawsze u≈ºywaj Number() conversion
- ‚úÖ Sequential thinking skuteczny dla z≈Ço≈ºonych problem√≥w
- ‚úÖ User-scoped dane wymagajƒÖ automatycznego seed przy rejestracji
- ‚úÖ Kr√≥tkie commity + CHANGELOG.md dla szczeg√≥≈Ç√≥w

---

## üìä Faza 5: Kategorie ‚úÖ 100% UKO≈ÉCZONA

### 5.1 Backend - API Kategorii ‚úÖ UKO≈ÉCZONA
- [x] Modu≈Ç `CategoriesModule` w NestJS
- [x] Endpoint: `GET /categories` (lista kategorii u≈ºytkownika)
- [x] Endpoint: `GET /categories/:id` (szczeg√≥≈Çy pojedynczej kategorii)
- [x] Endpoint: `POST /categories` (tworzenie niestandardowej kategorii)
- [x] Endpoint: `PATCH /categories/:id` (edycja kategorii)
- [x] Endpoint: `DELETE /categories/:id` (usuniƒôcie kategorii)
- [x] Auto-create domy≈õlnych kategorii przy rejestracji (AuthService)
- [x] DTO: CreateCategoryDto, UpdateCategoryDto z walidacjƒÖ
- [x] CategoriesService z logikƒÖ biznesowƒÖ
- [x] Business rule: nie mo≈ºna usunƒÖƒá kategorii z transakcjami
- [x] Walidacja duplikat√≥w (unique constraint userId_name_type)

### 5.2 Frontend - UI Kategorii ‚úÖ UKO≈ÉCZONA
- [x] Select/dropdown kategorii w formularzu transakcji (z API)
- [x] Strona zarzƒÖdzania kategoriami (`/categories`)
- [x] Formularz dodawania/edycji niestandardowej kategorii
- [x] Lista kategorii z mo≈ºliwo≈õciƒÖ edycji/usuniƒôcia
- [x] Ikony kategorii (lucide-react: Plus, Pencil, Trash2, ArrowLeft)
- [x] Kolory kategorii (color picker input z hex validation)
- [x] API Routes proxy: POST, PATCH, DELETE /api/categories
- [x] Link "Kategorie" w navbar dashboard
- [x] Delete confirmation modal
- [x] Empty state + loading states
- [x] Extended categoriesApi client (wszystkie metody CRUD)

**Wnioski z Fazy 5:**
- ‚úÖ Kompletny CRUD dla kategorii (Backend + Frontend)
- ‚úÖ User mo≈ºe teraz customizowaƒá swoje kategorie
- ‚úÖ lucide-react dla profesjonalnych ikon
- ‚úÖ Business rules dzia≈ÇajƒÖ (blokada delete z transactions)
- üéâ MVP Fazy 1-5 gotowe (86/86 zada≈Ñ - 100%)

---

## üìà Faza 6: Bud≈ºety i Raporty (MVP) üöÄ W TRAKCIE

### 6.1 Backend - API Bud≈ºet√≥w ‚úÖ UKO≈ÉCZONA
- [x] Modu≈Ç `BudgetsModule` w NestJS
- [x] DTO (CreateBudgetDto, UpdateBudgetDto, QueryBudgetDto)
- [x] Endpoint: `POST /budgets` (tworzenie bud≈ºetu)
- [x] Endpoint: `GET /budgets` (lista bud≈ºet√≥w z filtrowaniem)
- [x] Endpoint: `GET /budgets/:id` (szczeg√≥≈Çy + postƒôp)
- [x] Endpoint: `GET /budgets/:id/progress` (tylko progress)
- [x] Endpoint: `PATCH /budgets/:id` (edycja)
- [x] Endpoint: `DELETE /budgets/:id` (usuniƒôcie)
- [x] Logika obliczania postƒôpu bud≈ºetu (spent/limit/percentage/alerts)
- [x] Auto-obliczanie endDate na podstawie period
- [x] Walidacja: amount > 0, period (DAILY/WEEKLY/MONTHLY/YEARLY/CUSTOM)
- [x] Business rule: unique constraint (userId + categoryId + startDate)
- [x] Testy jednostkowe (24 tests, 100% passing ‚úÖ)
- [ ] Testy integracyjne

### 6.2 Frontend - UI Bud≈ºet√≥w ‚úÖ UKO≈ÉCZONA
- [x] Strona bud≈ºet√≥w (`/budgets`)
- [x] Formularz tworzenia/edycji bud≈ºetu (kategoria, kwota, okres, daty)
- [x] Lista bud≈ºet√≥w z progress barami (BudgetList + BudgetCard)
- [x] Progress colors: green (<80%), yellow (80-99%), red (‚â•100%)
- [x] Alerty przy przekroczeniu bud≈ºetu (80%, 100%)
- [x] Loading states i error handling
- [x] Delete confirmation modal
- [x] Link "Bud≈ºety" w dashboard navbar
- [x] API Routes proxy (/api/budgets, /api/budgets/[id])
- [x] Dashboard widget "Bud≈ºety" z overview (top 3 by percentage)

**Wnioski z Fazy 6 (Backend + Frontend):**
- ‚úÖ Bud≈ºety = kontrola wydatk√≥w z kategorii (reactive tracking)
- ‚úÖ calculateProgress() agreguje transakcje automatycznie
- ‚úÖ Alerty przy 80% i 100% limitu dzia≈ÇajƒÖ
- ‚úÖ Dark mode + lucide-react icons throughout
- ‚úÖ Business logic: unique constraint zapobiega duplikatom
- ‚úÖ Dashboard widget: top 3 bud≈ºety, compact progress bars, graceful error handling
- ‚úÖ Testy jednostkowe: 24 tests covering all CRUD + calculateProgress logic (100% passing)
- ‚ö†Ô∏è Prisma Decimal ‚Üí Number() conversion (jak w Transactions)
- üìä Pozosta≈Ço: testy integracyjne (e2e)

### 6.3 Dashboard Widget + Podstawowe Raporty ‚úÖ UKO≈ÉCZONA
- [x] Dashboard widget "Bud≈ºety" (top 3 bud≈ºety z progress) ‚úÖ
- [x] Endpoint: `GET /reports/summary` (podsumowanie: suma przychod√≥w/wydatk√≥w za okres)
- [x] Endpoint: `GET /reports/by-category` (wydatki/przychody po kategorii)
- [x] Strona raport√≥w (`/reports`) z wykresami (Recharts PieChart)
- [x] Wyb√≥r okresu dla raport√≥w (miesiƒÖc, kwarta≈Ç, rok, w≈Çasny zakres)
- [x] DateRangePicker z presetami (bie≈ºƒÖcy miesiƒÖc/kwarta≈Ç/rok)
- [x] SummaryCards (income/expense/balance z ikonami)
- [x] CategoryPieChart (breakdown wydatk√≥w z percentagami)
- [x] Link "Raporty" w nawigacji
- [x] Dark mode support
- [ ] Export danych do CSV (opcjonalnie - Faza 8)

---

## üß™ Faza 7: Testy i Jako≈õƒá Kodu

### 7.1 Testy Backend
- [ ] Konfiguracja Jest dla NestJS
- [ ] Testy jednostkowe dla wszystkich serwis√≥w
- [ ] Testy integracyjne dla wszystkich endpoint√≥w API
- [ ] Code coverage > 80%

### 7.2 Testy Frontend
- [ ] Konfiguracja Jest + React Testing Library
- [ ] Testy jednostkowe dla kluczowych komponent√≥w
- [ ] Testy integracyjne dla g≈Ç√≥wnych flow'√≥w (rejestracja, dodawanie transakcji)

### 7.3 Linting i Formatowanie
- [ ] ESLint dla backendu i frontendu
- [ ] Prettier dla formatowania kodu
- [ ] Husky + lint-staged (opcjonalnie)

---

## üöÄ Faza 8: CI/CD i Dokumentacja

### 8.1 GitHub Actions
- [ ] Workflow: uruchamianie test√≥w przy ka≈ºdym push/PR
- [ ] Workflow: budowanie obraz√≥w Docker
- [ ] Workflow: linting i type-checking

### 8.2 Dokumentacja
- [ ] Uzupe≈Çnienie `README.md` o pe≈ÇnƒÖ instrukcjƒô setup'u
- [ ] Dokumentacja API (Swagger w NestJS - opcjonalnie)
- [ ] `CONTRIBUTING.md` dla potencjalnych kontrybutor√≥w
- [ ] Aktualizacja `TODO.md` z postƒôpami

---

## üé® Faza 9: Polish i UX (Post-MVP)

- [ ] Responsywno≈õƒá na urzƒÖdzeniach mobilnych
- [ ] Dark mode (‚úÖ czƒô≈õciowo - zaimplementowane dla Dashboard, Categories, Budgets)
- [ ] Animacje i transitions
- [ ] Accessibility audit (a11y)
- [ ] Optymalizacja wydajno≈õci (Lighthouse audit)
- [ ] Testy E2E (Playwright/Cypress - opcjonalnie)

---

## ÔøΩ Faza 10: Cele Oszczƒôdno≈õciowe (Post-MVP) üéØ PLANOWANE

**Koncepcja:**
- **Savings Goals** = ≈õledzenie cel√≥w oszczƒôdno≈õciowych (np. "Wakacje w Grecji", "Nowy laptop", "Fundusz awaryjny")
- **R√≥≈ºnica vs Bud≈ºety:**
  - **Bud≈ºet** = REACTIVE (kontrolujesz wydatki: "max 500 z≈Ç na rozrywkƒô/miesiƒÖc")
  - **Savings Goal** = PROACTIVE (planujesz przysz≈Ço≈õƒá: "od≈Ç√≥≈º 5000 z≈Ç na wakacje do grudnia")
- **Funkcjonalno≈õƒá:**
  - Nazwa celu (np. "Wakacje w Grecji")
  - Kwota docelowa (targetAmount)
  - Kwota aktualna (currentAmount - u≈ºytkownik manualnie aktualizuje lub linkuje z transakcjami INCOME do kategorii "Oszczƒôdno≈õci")
  - Termin (deadline - opcjonalny)
  - Progress bar (currentAmount / targetAmount * 100%)
  - Tracking history (data + kwota wp≈Çaty)

### 10.1 Backend - API Savings Goals (TODO)
- [ ] Model `SavingsGoal` w Prisma (id, userId, name, targetAmount, currentAmount, deadline, createdAt, updatedAt)
- [ ] Model `SavingsContribution` (id, goalId, amount, date, description) - historia wp≈Çat
- [ ] Modu≈Ç `SavingsGoalsModule` w NestJS
- [ ] CRUD endpointy (POST, GET, PATCH, DELETE /savings-goals)
- [ ] Endpoint: `POST /savings-goals/:id/contribute` (dodanie wp≈Çaty)
- [ ] Progress calculation (currentAmount / targetAmount)
- [ ] Walidacja: targetAmount > 0, currentAmount >= 0

### 10.2 Frontend - UI Savings Goals (TODO)
- [ ] Strona `/savings-goals` z listƒÖ cel√≥w
- [ ] Formularz tworzenia/edycji celu (nazwa, kwota docelowa, deadline)
- [ ] Progress bars z kolorami (podobnie jak bud≈ºety)
- [ ] Modal "Dodaj wp≈Çatƒô" (kwota + data + opis)
- [ ] Historia wp≈Çat dla ka≈ºdego celu
- [ ] Dashboard widget "Cele Oszczƒôdno≈õciowe" (top 3)
- [ ] API Routes proxy

### 10.3 Integracje (opcjonalne)
- [ ] Link z kategoriƒÖ "Oszczƒôdno≈õci" (automatyczne dodawanie transakcji INCOME jako wp≈Çaty do celu)
- [ ] Powiadomienia przy osiƒÖgniƒôciu kamieni milowych (25%, 50%, 75%, 100%)
- [ ] Export danych celu do PDF/CSV

---

## ÔøΩüìù Notatki

- Ka≈ºde zadanie powinno byƒá realizowane zgodnie z zasadami KISS i YAGNI
- Przed oznaczeniem zadania jako uko≈Ñczonego: kod musi byƒá przetestowany
- Commit message'y wed≈Çug Conventional Commits: `feat:`, `fix:`, `test:`, `docs:`, etc.
- Regularne push'e do GitHuba
- **Budgets vs Savings Goals**: Bud≈ºety kontrolujƒÖ wydatki (reactive), cele oszczƒôdno≈õciowe planujƒÖ przysz≈Ço≈õƒá (proactive) - to osobne funkcjonalno≈õci!
- **Emoji w production**: Unikaj emoji w UI - u≈ºywaj lucide-react icons dla consistency

---

**Ostatnia aktualizacja:** 6 pa≈∫dziernika 2025
